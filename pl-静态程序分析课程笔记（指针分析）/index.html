<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=7.4.0">
  <link rel="mask-icon" href="/images/avatar.svg?v=7.4.0" color="#222">
  <link rel="alternate" href="/atom.xml" title="Anemone's Blog" type="application/atom+xml">
  <meta name="google-site-verification" content="Re5JdegRYzNFco-rC9lYIsvSWIgh5JvyfhuEaZCeFCk">
  <meta name="baidu-site-verification" content="opTC8YN3Pn">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: 'GB90MXPJ1C',
      apiKey: '05d808da3baf50ac2f2fad2dc3a3cd8f',
      indexName: 'dev_blog',
      hits: {"per_page":20},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="MotivationCHA åªçœ‹å®šä¹‰ç±»å‹ï¼Œä¼šå¾—åˆ°å¾ˆå¤šå®é™…ä¸è¢«è°ƒç”¨çš„å­ç±»æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒCHAçš„å¸¸é‡åˆ†ææ—¶åªèƒ½å¾—åˆ°NACè€ŒæŒ‡é’ˆåˆ†æä¼šå¾—åˆ°æ›´ç²¾ç¡®çš„å¯¹è±¡ç±»å‹ï¼šIntroduction to Pointer Analysis A fundamental static analysis, computes which memory locations a pointer can point to. For">
<meta name="keywords" content="ç™½ç›’æ‰«æ,é™æ€ç¨‹åºåˆ†æ,è¿‡ç¨‹é—´åˆ†æ">
<meta property="og:type" content="article">
<meta property="og:title" content="é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰">
<meta property="og:url" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/index.html">
<meta property="og:site_name" content="Anemone&#39;s Blog">
<meta property="og:description" content="MotivationCHA åªçœ‹å®šä¹‰ç±»å‹ï¼Œä¼šå¾—åˆ°å¾ˆå¤šå®é™…ä¸è¢«è°ƒç”¨çš„å­ç±»æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒCHAçš„å¸¸é‡åˆ†ææ—¶åªèƒ½å¾—åˆ°NACè€ŒæŒ‡é’ˆåˆ†æä¼šå¾—åˆ°æ›´ç²¾ç¡®çš„å¯¹è±¡ç±»å‹ï¼šIntroduction to Pointer Analysis A fundamental static analysis, computes which memory locations a pointer can point to. For">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200818213708639.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820210803574.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820211117510.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820211514827.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820212053813.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820212836084.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200821212128271.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200823104858792.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200823202143283.png">
<meta property="og:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200823204227690.png">
<meta property="og:updated_time" content="2020-10-04T03:41:48.399Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰">
<meta name="twitter:description" content="MotivationCHA åªçœ‹å®šä¹‰ç±»å‹ï¼Œä¼šå¾—åˆ°å¾ˆå¤šå®é™…ä¸è¢«è°ƒç”¨çš„å­ç±»æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒCHAçš„å¸¸é‡åˆ†ææ—¶åªèƒ½å¾—åˆ°NACè€ŒæŒ‡é’ˆåˆ†æä¼šå¾—åˆ°æ›´ç²¾ç¡®çš„å¯¹è±¡ç±»å‹ï¼šIntroduction to Pointer Analysis A fundamental static analysis, computes which memory locations a pointer can point to. For">
<meta name="twitter:image" content="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200818213708639.png">
  <link rel="canonical" href="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰ | Anemone's Blog</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Anemone's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="fa fa-search fa-fw"></i>æœç´¢</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input" id="search-input"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

  
</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Anemone">
      <meta itemprop="description" content="å…³æ³¨Webå®‰å…¨ã€ç§»åŠ¨å®‰å…¨ã€Fuzzæµ‹è¯•å’Œæœºå™¨å­¦ä¹ ">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Anemone's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰

          
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-08-18 21:22:13" itemprop="dateCreated datePublished" datetime="2020-08-18T21:22:13+08:00">2020-08-18</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-10-04 11:41:48" itemprop="dateModified" datetime="2020-10-04T11:41:48+08:00">2020-10-04</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Program-Language/" itemprop="url" rel="index"><span itemprop="name">Program Language</span></a></span>

                
                
              
            </span>
          

          
            <span id="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/" class="post-meta-item leancloud_visitors" data-flag-title="é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h1><p>CHA åªçœ‹å®šä¹‰ç±»å‹ï¼Œä¼šå¾—åˆ°å¾ˆå¤šå®é™…ä¸è¢«è°ƒç”¨çš„å­ç±»æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒCHAçš„å¸¸é‡åˆ†ææ—¶åªèƒ½å¾—åˆ°NAC</p><p>è€ŒæŒ‡é’ˆåˆ†æä¼šå¾—åˆ°æ›´ç²¾ç¡®çš„å¯¹è±¡ç±»å‹ï¼š</p><p><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200818213708639.png" alt="image-20200818213708639"></p><h1 id="Introduction-to-Pointer-Analysis"><a href="#Introduction-to-Pointer-Analysis" class="headerlink" title="Introduction to Pointer Analysis"></a>Introduction to Pointer Analysis</h1><blockquote>
<p>A fundamental static analysis, computes which memory locations a pointer can point to.</p>
<p>For object-oriented programs, computes which objects a pointer (variable or field) can point to.</p>
</blockquote><a id="more"></a>



<p>å³æŒ‡é’ˆåˆ†æ[1]ç”¨äºåˆ†æä¸€ä¸ªæŒ‡é’ˆç©¶ç«ŸæŒ‡å‘å“ªä¸€å—å†…å­˜ï¼Œå¯¹äºé¢å‘å¯¹è±¡ç¨‹åºï¼ŒæŒ‡é’ˆåˆ†æå¯ç”¨äºåˆ†æä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å“ªä¸€ä¸ªå˜é‡æˆ–è€…åŸŸã€‚</p>
<p>æŒ‡é’ˆåˆ†ææ˜¯mayåˆ†æã€‚</p>
<h2 id="æŒ‡é’ˆåˆ†æå’Œåˆ«ååˆ†æ"><a href="#æŒ‡é’ˆåˆ†æå’Œåˆ«ååˆ†æ" class="headerlink" title="æŒ‡é’ˆåˆ†æå’Œåˆ«ååˆ†æ"></a>æŒ‡é’ˆåˆ†æå’Œåˆ«ååˆ†æ</h2><ul>
<li><p>æŒ‡é’ˆåˆ†æå›ç­”æŒ‡é’ˆæŒ‡å‘å“ªä¸€ä¸ªå¯¹è±¡ï¼ˆå†…å­˜ï¼‰çš„é—®é¢˜</p>
</li>
<li><p>åˆ«ååˆ†æå›ç­”ä¸¤ä¸ªæŒ‡é’ˆæ˜¯å¦æŒ‡å‘åŒä¸€å¯¹è±¡ï¼ˆå†…å­˜ï¼‰çš„é—®é¢˜</p>
</li>
</ul>
<h2 id="æŒ‡é’ˆåˆ†æçš„åº”ç”¨"><a href="#æŒ‡é’ˆåˆ†æçš„åº”ç”¨" class="headerlink" title="æŒ‡é’ˆåˆ†æçš„åº”ç”¨"></a>æŒ‡é’ˆåˆ†æçš„åº”ç”¨</h2><ul>
<li>åŸºç¡€ä¿¡æ¯æ„å»º<ul>
<li>Call graphã€åˆ«ååˆ†æ</li>
</ul>
</li>
<li>ç¼–è¯‘å™¨ä¼˜åŒ–</li>
<li>Bugæ£€æµ‹<ul>
<li>ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
</ul>
</li>
<li>å®‰å…¨åˆ†æ<ul>
<li>ä¿¡æ¯æµåˆ†æ</li>
</ul>
</li>
</ul>
<h1 id="Key-Factors-of-Pointer-Analysis"><a href="#Key-Factors-of-Pointer-Analysis" class="headerlink" title="Key Factors of Pointer Analysis"></a>Key Factors of Pointer Analysis</h1><p>æŒ‡é’ˆåˆ†ææ˜¯ä¸€ä¸ªå¤æ‚ç³»ç»Ÿï¼Œå¾ˆå¤šå› ç´ å½±å“äº†æŒ‡é’ˆåˆ†æçš„å‡†ç¡®åº¦å’Œæ•ˆç‡ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Factor</th>
<th>Problem</th>
<th>Choice</th>
</tr>
</thead>
<tbody>
<tr>
<td>Heap abstraction</td>
<td>å¦‚ä½•å¯¹å †å†…å­˜å»ºæ¨¡</td>
<td>1. Allocation site*; 2. Storeless</td>
</tr>
<tr>
<td>Context sensitivity</td>
<td>æ˜¯å¦ä¸Šä¸‹æ–‡æ•æ„Ÿ</td>
<td>1. Context-sensitive*; 2. Context-insensitive*</td>
</tr>
<tr>
<td>Flow sensitivity</td>
<td>æ˜¯å¦æµæ•æ„Ÿ</td>
<td>1. Flow-sensitive; 2. Flow-insensitive*</td>
</tr>
<tr>
<td>Analysis scope</td>
<td>åˆ†æèŒƒå›´</td>
<td>1. Whole-program*; 2. Demand-driven</td>
</tr>
</tbody>
</table>
</div>
<p>æ‰“â€œ*â€å·çš„ä¸ºæœ¬è¯¾ç¨‹ä»‹ç»çš„åˆ†ææ–¹æ³•ã€‚</p>
<h2 id="Heap-Abstraction-å †æŠ½è±¡"><a href="#Heap-Abstraction-å †æŠ½è±¡" class="headerlink" title="Heap Abstraction(å †æŠ½è±¡)"></a>Heap Abstraction(å †æŠ½è±¡)</h2><p>åœ¨é™æ€åˆ†æè§†è§’ä¸­ï¼Œç¨‹åºä¸­ä¼šåˆ›å»ºæ— é™æ•°é‡çš„å¯¹è±¡å®ä¾‹ï¼ˆè€ƒè™‘åˆ°éš¾ä»¥åˆ†æå¾ªç¯/é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼‰ï¼Œä¸ºäº†ä¿è¯æŒ‡é’ˆåˆ†æèƒ½å¤Ÿç»ˆæ­¢ï¼Œéœ€è¦å°†æ— é™æ•°é‡çš„å¯¹è±¡æŠ½è±¡ä¸ºæœ‰é™æ•°é‡çš„å¯¹è±¡<br><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820210803574.png" alt="image-20200820210803574"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸»è¦æœ‰ä¸¤å¤§æµæ´¾[2]ï¼š</p>
<ul>
<li>Store based model</li>
<li>Storeless model</li>
</ul>
<p>å…¶ä¸­ï¼ŒStore based model ä¸­çš„ Allocation sites è¾ƒä¸ºå¸¸ç”¨ï¼Œå…¶æŠ½è±¡ä¾æ®æ˜¯åŒä¸€åˆ›å»ºç‚¹çš„å¯¹è±¡ä¸ºåŒä¸€å¯¹è±¡ï¼š</p>
<p><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820211117510.png" alt="image-20200820211117510"></p>
<h2 id="ä¸Šä¸‹æ–‡æ•æ„Ÿ"><a href="#ä¸Šä¸‹æ–‡æ•æ„Ÿ" class="headerlink" title="ä¸Šä¸‹æ–‡æ•æ„Ÿ"></a>ä¸Šä¸‹æ–‡æ•æ„Ÿ</h2><p>æŒ‡é’ˆåˆ†æè¿‡ç¨‹ä¸­å¦‚ä½•å¯¹è°ƒç”¨ä¸Šä¸‹æ–‡å»ºæ¨¡ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç§</p>
<ul>
<li>ä¸Šä¸‹æ–‡æ•æ„Ÿ<ul>
<li>æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡åˆ†æä¸€æ¬¡ </li>
<li>æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œä¸åŒä¸Šä¸‹æ–‡æ–¹æ³•å¯¹è±¡ä¸ä¸€æ ·ï¼Œé‡å¤åˆ†æå‡½æ•°</li>
</ul>
</li>
<li>ä¸Šä¸‹æ–‡ä¸æ•æ„Ÿ<ul>
<li>åŒä¸€ä¸ªå‡½æ•°åªåˆ†æä¸€æ¬¡</li>
<li>åˆ†ææ—¶åˆå¹¶æ‰€æœ‰è°ƒç”¨çš„è¾“å…¥</li>
<li>ä¸€èˆ¬åœ°ç²¾åº¦è¾ƒä½</li>
</ul>
</li>
</ul>
<p>ä¸‹å›¾å·¦ä¾§ä¸ºä¸Šä¸‹æ–‡æ•æ„Ÿï¼Œå³ä¾§ä¸ºä¸Šä¸‹æ–‡ä¸æ•æ„Ÿï¼š</p>
<p><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820211514827.png" alt="image-20200820211514827"></p>
<p>ä¸ªäººè®¤ä¸ºå¯¹äºç‰¹å®šçš„åˆ†æï¼ˆå¦‚æ±¡ç‚¹åˆ†æï¼‰åšå¥½å‡½æ•°æ‘˜è¦ï¼ˆsummaryï¼‰åï¼Œå°±å¯ä»¥åšä¸Šä¸‹æ–‡ä¸æ•æ„Ÿçš„åˆ†æï¼ŒåŒæ—¶ä¸æŸå¤±ç²¾åº¦ã€‚</p>
<h2 id="æµæ•æ„Ÿ"><a href="#æµæ•æ„Ÿ" class="headerlink" title="æµæ•æ„Ÿ"></a>æµæ•æ„Ÿ</h2><p>åšæŒ‡é’ˆåˆ†ææ—¶ï¼Œå¯¹æ§åˆ¶æµçš„å¤„ç†</p>
<ul>
<li>æ§åˆ¶æµæ•æ„Ÿ[4]<ul>
<li>è€ƒè™‘æ‰§è¡Œé¡ºåº</li>
<li>ç»´æŠ¤æ¯ä¸€ç¨‹åºç‚¹çš„æŒ‡é’ˆæŒ‡å‘å…³ç³»</li>
</ul>
</li>
<li>æ§åˆ¶æµä¸æ•æ„Ÿ<ul>
<li>ä¿å­˜æ‰€æœ‰å¯èƒ½æŒ‡å‘çš„å¯¹è±¡</li>
</ul>
</li>
</ul>
<p><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820212053813.png" alt="image-20200820212053813"></p>
<p>å¦‚ä¸Šå›¾ä»£ç ä¸­ï¼Œæ§åˆ¶æµæ•æ„Ÿï¼ˆè“è‰²ï¼‰å¯¹æ¯ä¸ªç¨‹åºç‚¹éƒ½åšäº†è®°å½•ï¼Œè€Œæ§åˆ¶æµä¸æ•æ„Ÿï¼ˆæ©˜è‰²ï¼‰åˆ™ä¿å­˜æŒ‡é’ˆçš„æ‰€æœ‰å¯èƒ½æŒ‡å‘ï¼›</p>
<p>å…ˆå‰çš„æ•°æ®æµåˆ†æéƒ½æ˜¯æµæ•æ„Ÿçš„ï¼Œè€Œåœ¨javaè¯­è¨€çš„æŒ‡é’ˆåˆ†æä¸­ï¼ŒFlow-sensitiveæ•ˆæœæœªå¿…æ¯”Flow-insensitiveå¥½ï¼Œå› æ­¤ä¸»è¦ä»‹ç» insensitiveã€‚</p>
<h2 id="Analysis-Scope"><a href="#Analysis-Scope" class="headerlink" title="Analysis Scope"></a>Analysis Scope</h2><p>æŒ‡é’ˆåˆ†æå¯ä»¥åˆ†æå…¨ç¨‹åºï¼Œä¹Ÿå¯æ ¹æ®éœ€è¦åˆ†æéƒ¨åˆ†ä»£ç ä¸­çš„æŒ‡é’ˆä¿¡æ¯ï¼š</p>
<ul>
<li>Whole-program<ul>
<li>åˆ†æç¨‹åºæ‰€æœ‰ä¿¡æ¯</li>
</ul>
</li>
<li>Demand-driven<ul>
<li>åˆ†æéƒ¨åˆ†æŒ‡é’ˆä¿¡æ¯ </li>
<li>è®¡ç®—é‡æ¯”å…¨ç¨‹åºå°</li>
<li>ä½†è€ƒè™‘åˆ°ä¾èµ–ï¼Œæ‰€ä»¥è®¡ç®—é€Ÿåº¦æœªå¿…æ›´å¿«</li>
</ul>
</li>
</ul>
<h1 id="Concerned-Statements"><a href="#Concerned-Statements" class="headerlink" title="Concerned Statements"></a>Concerned Statements</h1><h2 id="Javaä¸­çš„æŒ‡é’ˆ"><a href="#Javaä¸­çš„æŒ‡é’ˆ" class="headerlink" title="Javaä¸­çš„æŒ‡é’ˆ"></a>Javaä¸­çš„æŒ‡é’ˆ</h2><ul>
<li>æœ¬åœ°å˜é‡ï¼ˆlocal variableï¼‰ï¼Œe.g., <code>x</code></li>
<li>é™æ€åŸŸï¼ˆstatic fieldï¼‰, e.g., <code>C.f</code>ï¼Œä½œä¸ºå…¨å±€å˜é‡åˆ†æï¼Œä¸æœ¬åœ°å˜é‡åˆ†ææ–¹æ³•ç±»ä¼¼ï¼ˆæœ¬è¯¾ä¸åšè®¨è®ºï¼‰</li>
<li>å¯¹è±¡åŸŸï¼ˆinstance fieldï¼‰ï¼Œe.g., <code>x.f</code>ï¼Œå®ä¾‹å¯¹è±¡çš„å±æ€§</li>
<li><p>æ•°ç»„å…ƒç´ ï¼ˆarray elementï¼‰ï¼Œe.g., array[i]ï¼Œç”±äºé™æ€åˆ†ææ²¡æ³•è®¡ç®—æ•°ç»„ä¸‹æ ‡ï¼Œé€šç”¨åšæ³•å°†å…¶ä½œä¸ºsingle fieldï¼Œä¸å¤„ç†instance fieldç±»ä¼¼ï¼ˆæœ¬è¯¾ä¸åšè®¨è®ºï¼‰<br><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200820212836084.png" alt="image-20200820212836084"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒåŸå…ˆæ•°ç»„ä¸‹è¡¨çš„è®¿é—®<code>array[0]</code> å˜ä¸º<code>array.arr</code>ã€‚</p>
</li>
</ul>
<h2 id="ä¸æŒ‡é’ˆåˆ†æç›¸å…³çš„è¯­å¥"><a href="#ä¸æŒ‡é’ˆåˆ†æç›¸å…³çš„è¯­å¥" class="headerlink" title="ä¸æŒ‡é’ˆåˆ†æç›¸å…³çš„è¯­å¥"></a>ä¸æŒ‡é’ˆåˆ†æç›¸å…³çš„è¯­å¥</h2><ul>
<li>New: <code>x = new T()</code></li>
<li>Assign: <code>x = y</code></li>
<li>Store: <code>x.f = y</code></li>
<li>Load: <code>y = x.f</code></li>
<li>Call: <code>r = x.k (a, ...)</code></li>
</ul>
<p>æ³¨æ„å¯¹äºçœŸå®åœºæ™¯ä¸‹ <code>x.f.g.h=y</code> çš„æƒ…å†µï¼Œåœ¨ä¸‰åœ°å€ç è¡¨ç¤ºæ—¶å¯ä»¥ç”¨ä¸´æ—¶å˜é‡åšç®€åŒ–ï¼Œå˜ä¸º<code>t1=x.f; t2=t1.g; t2.h=y</code></p>
<p>å¯¹äºå¯¹è±¡è°ƒç”¨(Call)è¯­å¥ï¼Œå­˜åœ¨ä¸‰ç§è°ƒç”¨ç±»å‹ï¼š</p>
<ul>
<li>Static callï¼š<code>C.foo()</code></li>
<li>Special call: <code>super.foo()/x.&lt;init&gt;()/this.privateFoo()</code></li>
<li>Virtual call: <code>x.foo()</code></li>
</ul>
<p>ç”±äº static callå’Œspecial all éƒ½åªæœ‰ä¸€ç§å‡½æ•°åŸå‹ï¼Œå› æ­¤åªéœ€åˆ†ævirtual callçš„æƒ…å†µã€‚</p>
<h1 id="Pointer-Analysis-Rules"><a href="#Pointer-Analysis-Rules" class="headerlink" title="Pointer Analysis: Rules"></a>Pointer Analysis: Rules</h1><h2 id="Domains-and-Notations"><a href="#Domains-and-Notations" class="headerlink" title="Domains and Notations"></a>Domains and Notations</h2><p>ä»¥ä¸‹ä¸ºéœ€è¦ç”¨åˆ°çš„å®šä¹‰ï¼š</p>
<ul>
<li>å˜é‡ï¼š$x,y \in V$</li>
<li>åŸŸï¼ˆFieldsï¼‰ï¼š$f,g\in F$</li>
<li>å¯¹è±¡ï¼ˆObjectsï¼‰ï¼š$o_i, o_j \in O$</li>
<li>å®ä¾‹å±æ€§ï¼ˆInstance fieldsï¼‰ï¼š$o_i.f, o_j.g \in O \times F$</li>
<li>æŒ‡é’ˆï¼š$Pointer = V \cup (O \times F)$</li>
</ul>
<p>æ³¨ï¼š</p>
<ul>
<li>$P(O)$ æŒ‡$O$çš„å¹‚é›†</li>
<li>$pt(p)$ è¡¨ç¤ºæŒ‡å‘ $p$ çš„æŒ‡é’ˆé›†åˆ</li>
</ul>
<h2 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h2><p>$\frac{a}{b}$ä¸ºæ¨å¯¼ç¬¦å·ï¼Œå³å¦‚æœæ¡ä»¶ $a$ æ»¡è¶³ï¼Œé‚£ä¹ˆ $b$ ä¹Ÿæ»¡è¶³ï¼ˆåœ¨inferé‚£ä¹Ÿä»‹ç»è¿‡æ­¤ç¬¦å·ï¼‰ï¼Œä¸ªäººæ„Ÿè§‰å¯ä»¥ç†è§£ä¸º$\{a\}stmt\{b\}$ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ»¡è¶³$a$ åï¼Œè¿›è¡Œ$b$æ“ä½œã€‚</p>
<ul>
<li><p>Newï¼Œ<code>i: x = new T()</code>ï¼Œæ–°å»ºå¯¹è±¡æ—¶ï¼Œ $o_i$ åŠ å…¥æŒ‡é’ˆé›†ä¸­ (å†™æ³•ä¸åŒï¼‰ï¼š</p>
<script type="math/tex; mode=display">
\frac{}{o_i \in pt(x)}</script></li>
<li><p>Assign, <code>x = y</code>ï¼Œå‡ºç°èµ‹å€¼åï¼Œè®©yæŒ‡å‘çš„å†…å®¹æŒ‡å‘xï¼š</p>
<script type="math/tex; mode=display">
\frac{o_{i} \in p t(y)}{o_{i} \in p t(x)}</script></li>
<li><p>Store, <code>x.f = y</code>ï¼Œèµ‹å€¼ç»™å±æ€§æ—¶ï¼Œå°†æŒ‡å‘ $y$ çš„æŒ‡é’ˆä¹Ÿæ”¾å…¥ $o_{i}.f$ çš„é›†åˆä¸­ï¼š</p>
<script type="math/tex; mode=display">
\frac{o_i \in pt(x), o_j \in pt(y)}{o_j \in pt(o_i.f)}</script></li>
</ul>
<ul>
<li>Load, <code>y = x.f</code>ï¼Œå±æ€§èµ‹å€¼ç»™å˜é‡æ—¶ï¼ŒæŒ‡å‘ $o_i.f$ çš„æŒ‡é’ˆæŒ‡å‘ $y$ï¼š<script type="math/tex; mode=display">
\frac{o_{i} \in p t(x), o_{j} \in p t\left(o_{i} . f\right)}{o_{j} \in p t(y)}</script></li>
</ul>
<p>ä¸‹å›¾ç»™å‡ºå››ç§æƒ…å†µçš„å½¢è±¡è¡¨ç¤ºï¼š<br><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200821212128271.png" alt="image-20200821212128271"></p>
<h1 id="How-to-Implement-Pointer-Analysis"><a href="#How-to-Implement-Pointer-Analysis" class="headerlink" title="How to Implement Pointer Analysis"></a>How to Implement Pointer Analysis</h1><blockquote>
<p>Pointer analysis is to propagate points-to information among pointers (variables &amp; fields).</p>
</blockquote>
<p>æŒ‡é’ˆåˆ†æå°±æ˜¯åœ¨å˜é‡å’ŒåŸŸï¼ˆæŒ‡é’ˆï¼‰ä¸­ä¼ é€’æŒ‡å‘å†…å­˜çš„ä¿¡æ¯ã€‚</p>
<p>ä¹Ÿæœ‰è§‚ç‚¹æ˜¯æŒ‡é’ˆåˆ†æå°±æ˜¯æ±‚è§£ä¸€ç³»åˆ—æŒ‡é’ˆçš„çº¦æŸæ¡ä»¶[3]ã€‚</p>
<h2 id="Pointer-Flow-Graph"><a href="#Pointer-Flow-Graph" class="headerlink" title="Pointer Flow Graph"></a>Pointer Flow Graph</h2><p>å› æ­¤ä½¿ç”¨å›¾æ¥ä¿å­˜æŒ‡é’ˆä¹‹é—´çš„å…³ç³»ï¼Œå½“æŒ‡é’ˆ x å˜åŒ–æ—¶ï¼ŒåŒæ—¶éœ€è¦æ”¹å˜ x åç»§æŒ‡é’ˆçš„æŒ‡å‘å†…å®¹ã€‚</p>
<blockquote>
<p>Pointer flow graph of a program is a directed graph  that expresses how objects flow among the pointers in the program.</p>
</blockquote>
<p>å›¾ä¸­çš„ç‚¹ä¸ºæŒ‡é’ˆï¼ˆå˜é‡æˆ–è€…æŠ½è±¡å¯¹è±¡å®ä¾‹çš„åŸŸ/å±æ€§ï¼‰ï¼š</p>
<p>Nodesï¼š$Pointer = V \cup (O \times F)$</p>
<p>å›¾ä¸­çš„è¾¹ $x \rightarrow y $ è¡¨ç¤ºæŒ‡é’ˆ $x$ æŒ‡å‘çš„å¯¹è±¡ä¹Ÿè¢« $y$ æŒ‡å‘ï¼ˆ$x$ çš„æŒ‡é’ˆä¿¡æ¯æµå‘ $y$ ï¼‰</p>
<p>Edgesï¼š$Pointer \times Pointer$</p>
<p>å› æ­¤ï¼Œå…ˆå‰çš„å››æ¡è¯­å¥äº§ç”Ÿçš„è¾¹å¯ä»¥ç”¨ä¸‹å›¾è¡¨ç¤ºï¼š<br><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200823104858792.png" alt="image-20200823104858792"></p>
<h1 id="Pointer-Analysis-Algorithms"><a href="#Pointer-Analysis-Algorithms" class="headerlink" title="Pointer Analysis: Algorithms"></a>Pointer Analysis: Algorithms</h1><h2 id="Worklist"><a href="#Worklist" class="headerlink" title="Worklist"></a>Worklist</h2><p>$WL \subseteq      \left \langle Pointer, \mathcal{P}(O)\right \rangle^*$ï¼Œ å³WLä¸­çš„å…ƒç´ ä¸º$n, pts$ï¼Œè¡¨ç¤ºæŒ‡é’ˆ$n$å¯èƒ½æŒ‡å‘çš„å†…å­˜/å¯¹è±¡é›†åˆä¸º $pts$</p>
<h2 id="åŠ è¾¹å‡½æ•°-AddEdge-ï¼š"><a href="#åŠ è¾¹å‡½æ•°-AddEdge-ï¼š" class="headerlink" title="åŠ è¾¹å‡½æ•° AddEdge()ï¼š"></a>åŠ è¾¹å‡½æ•° AddEdge()ï¼š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">AddEdge</span><span class="params">(s, t)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> s â†’ t âˆ‰ PFG:</span><br><span class="line">        add s â†’ t to PFG  <span class="comment"># å°†s â†’ tåŠ å…¥PFG</span></span><br><span class="line">        <span class="keyword">if</span> pt(s) <span class="keyword">is</span> <span class="keyword">not</span> empty:</span><br><span class="line">            add &lt;t, pt(s)&gt; to WL <span class="comment"># å°†&lt;t,sæŒ‡å‘å†…å®¹&gt;åŠ å…¥å·¥ä½œé˜Ÿåˆ—</span></span><br></pre></td></tr></table></figure>
<p>å³è‹¥æ·»åŠ  $s \rightarrow t$ ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è¾¹æ˜¯å¦åœ¨PFGä¸­ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œåˆ™å°†è¯¥è¾¹åŠ å…¥PFGï¼›å¹¶ä¸”æ£€æŸ¥ s æŒ‡å‘çš„å†…å­˜é›†åˆï¼Œå¦‚æœé›†åˆä¸ç©ºï¼Œåˆ™éœ€ä¿è¯ $s$ æŒ‡å‘çš„å†…å®¹è¢« $t$ æŒ‡å‘ï¼Œå³åŠ å…¥å·¥ä½œé˜Ÿåˆ—ä¸­ã€‚</p>
<h2 id="æŒ‡é’ˆä¼ æ’­å‡½æ•°-Propagate-ï¼š"><a href="#æŒ‡é’ˆä¼ æ’­å‡½æ•°-Propagate-ï¼š" class="headerlink" title="æŒ‡é’ˆä¼ æ’­å‡½æ•° Propagate()ï¼š"></a>æŒ‡é’ˆä¼ æ’­å‡½æ•° Propagate()ï¼š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Propagate</span><span class="params">(n, pts)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    n: æŒ‡é’ˆn</span></span><br><span class="line"><span class="string">    pts: nå¯èƒ½æŒ‡å‘çš„æ–°çš„æŒ‡é’ˆé›†åˆ</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> pts <span class="keyword">is</span> <span class="keyword">not</span> empty:</span><br><span class="line">        pt(n) â‹ƒ= pts <span class="comment"># å°†ptså†…å®¹å­˜å…¥åˆ°æŒ‡é’ˆæŒ‡å‘çš„é›†åˆä¸­</span></span><br><span class="line">        <span class="keyword">for</span> each n â†’ s âˆˆ PFG</span><br><span class="line">        	add s, pts to WL</span><br></pre></td></tr></table></figure>
<p>å³ pts ä¸ä¸ºç©ºæ—¶ï¼Œå°† $pts$ å†…å®¹å­˜å…¥ $n$ çš„æŒ‡é’ˆé›†åˆä¸­ï¼Œæ¥ç€æ‰¾nçš„åç»§sï¼Œå¯¹æ¯ä¸€ä¸ªsï¼Œå°† &lt;s, pts&gt; åŠ å…¥WLã€‚</p>
<h2 id="ä¸»å‡½æ•°-Solve-ï¼š"><a href="#ä¸»å‡½æ•°-Solve-ï¼š" class="headerlink" title="ä¸»å‡½æ•° Solve()ï¼š"></a>ä¸»å‡½æ•° <code>Solve()</code>ï¼š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Solve</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    S: ç¨‹åºæ‰€æœ‰è¯­å¥</span></span><br><span class="line"><span class="string">    WLï¼šå·¥ä½œé˜Ÿåˆ—</span></span><br><span class="line"><span class="string">    PFGï¼š Pointer flow graph</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">	WL = [] <span class="comment"># e.g., [&lt;n, pts&gt;] è¡¨ç¤ºæŒ‡é’ˆnå¯èƒ½ä¼šæŒ‡å‘ptsé›†åˆï¼ˆæ¯æ¬¡è¿­ä»£å°±ä¼šæœ‰æ–°çš„å¯èƒ½ï¼‰</span></span><br><span class="line">	PFG = &#123;&#125; <span class="comment"># e.g., &#123;&lt;x, &#123;ğ‘œğ‘–&#125;&gt;&#125; è¡¨ç¤ºæŒ‡é’ˆxæŒ‡å‘å¯¹è±¡ğ‘œğ‘–</span></span><br><span class="line">	<span class="keyword">for</span> each i: x = new T() âˆˆ ğ‘†: <span class="comment"># å¤„ç† new stmt</span></span><br><span class="line">		add &lt;x, &#123;ğ‘œğ‘–&#125;&gt; to WL </span><br><span class="line">	<span class="keyword">for</span> each x = y âˆˆ S: <span class="comment"># å¤„ç† assign stmt</span></span><br><span class="line">		AddEdge(y, x)</span><br><span class="line">	<span class="keyword">while</span> WL <span class="keyword">is</span> <span class="keyword">not</span> empty:</span><br><span class="line">        remove n, pts <span class="keyword">from</span> WL</span><br><span class="line">        Î” = pts - pt(n)</span><br><span class="line">        Propagate(n, Î”)</span><br><span class="line">        <span class="keyword">if</span> n represents a variable x:</span><br><span class="line">            <span class="keyword">for</span> each ğ‘œğ‘– âˆˆ Î”:</span><br><span class="line">                <span class="keyword">for</span> each x.f = y âˆˆ S: <span class="comment"># å¤„ç† store stmt</span></span><br><span class="line">                    AddEdge(y, ğ‘œğ‘–.ğ‘“)</span><br><span class="line">                <span class="keyword">for</span> each y = x.f âˆˆ S: <span class="comment"># å¤„ç† load stmt</span></span><br><span class="line">                    AddEdge(ğ‘œğ‘–.ğ‘“, y)</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆå¯ä»¥çœ‹åˆ°ï¼Œåœ¨9ã€11ã€19å’Œ21è¡Œåˆ†åˆ«å¤„ç†äº†newã€assignã€storeå’Œloadæ“ä½œï¼š</p>
<ul>
<li>å¯¹äºnewæ“ä½œï¼Œç›´æ¥å°† $\left \langle x, o_i \right\rangle$ åŠ å…¥worklist</li>
<li>å¯¹äºassignæ“ä½œï¼Œå°†xæŒ‡å‘çš„å†…å®¹ä¹Ÿè¢«yæŒ‡å‘ï¼Œå³è°ƒç”¨<code>AddEdge()</code></li>
</ul>
<p>æ¥ä¸‹æ¥è¿›å…¥å¾ªç¯ï¼Œç›´åˆ°å·¥ä½œé˜Ÿåˆ—ä¸ºç©ºï¼š</p>
<ol>
<li>å–å‡ºé˜Ÿå¤´è¦å¤„ç†çš„æŒ‡é’ˆnå’Œå…¶å¯¹åº”çš„pts</li>
<li>æ±‚å·®å¼‚ Î”ï¼Œptsä¸­çš„æœ‰ä¸€äº›åœ°å€å…ˆå‰å·²ç»ä¼ æ’­è¿‡ï¼Œåªéœ€å¤„ç†å‰©ä½™éƒ¨åˆ†</li>
<li>è°ƒç”¨<code>Propogate()</code>ï¼Œå°† Î” å†…å®¹æ”¾å…¥ $pt(n)$ å¹¶ä¸”æ·»åŠ æ–°çš„work</li>
</ol>
<p>æ¥ç€éœ€è¦å¤„ç†å¯¹è±¡æ“ä½œï¼Œ17-18çš„è¡Œæ„æŒ‡è‹¥æŒ‡é’ˆnè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå˜é‡ï¼ˆè€Œä¸æ˜¯field)ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸€ä¸ª Î” ä¸­çš„å¯¹è±¡å®ä¾‹ï¼Œå¤„ç†æ‰€æœ‰ä¸ $x.f$ ç›¸å…³çš„ store å’Œ load æ“ä½œï¼Œå¯¹ store å’Œ load æ“ä½œéƒ½æ˜¯ä½¿ç”¨<code>AddEdge()</code>å¤„ç†ï¼ˆ19-22è¡Œï¼‰ã€‚</p>
<h2 id="å…·ä½“ç¤ºä¾‹"><a href="#å…·ä½“ç¤ºä¾‹" class="headerlink" title="å…·ä½“ç¤ºä¾‹"></a>å…·ä½“ç¤ºä¾‹</h2><p>è€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b = <span class="keyword">new</span> C();</span><br><span class="line">a = b;</span><br><span class="line">c = <span class="keyword">new</span> C();</span><br><span class="line">c.f = a;</span><br><span class="line">d = c;</span><br><span class="line">c.f = d;</span><br><span class="line">e = d.f;</span><br></pre></td></tr></table></figure>
<p><strong>é¦–å…ˆç»è¿‡<code>solve():L9-12</code>çš„åˆå§‹åŒ–ï¼š</strong></p>
<ul>
<li>WL=[&lt;b,{o1}&gt;, &lt;c,{o3}&gt;]</li>
<li><p>PFG:</p>
<pre class="mermaid">  graph RL
    b("b{}") --> a("a{}")
    c("c{}") --> d("d{}")</pre>

</li>
</ul>
<p><strong>å¤„ç†&lt;b,{o1}&gt;</strong>: ä¸»è¦æ‰§è¡Œç¬¬16è¡Œ<code>Propagate()</code></p>
<ul>
<li>WL=[&lt;c,{o3}&gt;, &lt;a,{o1}&gt;]ï¼Œå› ä¸ºbâ†’aï¼Œæ‰€ä»¥å¢åŠ äº†ä¸€ä¸ªæ–°work</li>
<li>PFG:<pre class="mermaid">  graph RL
    b("b{o1}") --> a("a{}")
    c("c{}") --> d("d{}")</pre>

</li>
</ul>
<p><strong>å¤„ç†&lt;c, {o3}&gt;</strong>ï¼Œé™¤äº†<code>propagate(c, {o3})</code>ï¼Œæ³¨æ„åˆ°ç¬¬ 4 è¡Œå’Œç¬¬ 6 è¡Œï¼Œæ‰€ä»¥è¿˜éœ€å¤„ç†storeï¼Œå³<code>AddEdge(a,o3.f)</code>,<code>AddEdge(d,o3.f)</code>ï¼Œå› ä¸ºç›®å‰ a å’Œ d æŒ‡å‘å†…å®¹éƒ½æ˜¯ç©ºé›†ï¼Œæ‰€ä»¥ WL ä¸å¢åŠ ï¼š</p>
<ul>
<li>WL=[&lt;a,{o1}&gt;, &lt;d,{o3}&gt;]</li>
<li>PFG:    <pre class="mermaid">  graph RL
    b("b{o1}") --> a("a{}")
    c("c{o3}") --> d("d{}")
    a-->o3.f["o3.f{}"] 
    d-->o3.f</pre>

</li>
</ul>
<p><strong>å¤„ç†&lt;a,{o1}&gt;</strong>ï¼Œ<code>propagate(a, {o1})</code>ï¼š</p>
<ul>
<li>WL=[&lt;d,{o3}&gt;, &lt;o3.f, {o1}&gt;]</li>
<li>PFG:    <pre class="mermaid">  graph RL
    b("b{o1}") --> a("a{o1}")
    c("c{o3}") --> d("d{}")
    a-->o3.f["o3.f{}"] 
    d-->o3.f</pre>

</li>
</ul>
<p><strong>å¤„ç†&lt;d,{o3}&gt;</strong>ï¼Œ<code>propagate(d, {o3})</code>, ä»¥åŠæ³¨æ„åˆ°ç¬¬ 7 è¡Œçš„ load è¯­å¥ï¼Œè°ƒç”¨<code>AddEdge(o3.f,e)</code>ï¼š</p>
<ul>
<li>WL=[&lt;o3.f, {o1}&gt;, &lt;o3.f, {o3}&gt;]</li>
<li><p>PFG:    </p>
<pre class="mermaid">  graph RL
    b("b{o1}") --> a("a{o1}")
    c("c{o3}") --> d("d{o3}")
    a-->o3.f["o3.f{}"] 
    d-->o3.f
    o3.f --> e("e{}")</pre>

</li>
</ul>
<p><strong>åé¢æ­¥éª¤çœç•¥ï¼Œæœ€å PFG ç»“æœä¸ºï¼š</strong></p>
<pre class="mermaid">graph RL
      b("b{o1}") --> a("a{o1}")
      c("c{o3}") --> d("d{o3}")
      a-->o3.f["o3.f{o1, o3}"] 
      d-->o3.f
      o3.f --> e("e{o1, o3}")</pre>

<p>å¯ä»¥çœ‹åˆ° PFG ä¸­å·²ç»è®°å½•äº†æ¯ä¸ªæŒ‡é’ˆå˜é‡å¯èƒ½æŒ‡å‘çš„å¯¹è±¡ã€‚</p>
<h1 id="Pointer-Analysis-with-Method-Calls"><a href="#Pointer-Analysis-with-Method-Calls" class="headerlink" title="Pointer Analysis with Method Calls"></a>Pointer Analysis with Method Calls</h1><p>åœ¨åˆ†æ call statments æ—¶ï¼Œéœ€è¦åšè¿‡ç¨‹é—´åˆ†æï¼Œå³éœ€è¦æ„å»º call graphï¼Œå·²çŸ¥çš„ CHA æ„å»ºçš„ call graph æ˜¯ä¸å‡†ç¡®çš„ï¼Œæœ¬èŠ‚è¯¾ä»‹ç»å¦‚ä½•ä½¿ç”¨æŒ‡é’ˆåˆ†ææœ¬èº«æ„å»º call graphï¼Œå³å®Œæˆè·¨å‡½æ•°çš„æŒ‡é’ˆåˆ†æã€‚</p>
<h2 id="Rule-Call"><a href="#Rule-Call" class="headerlink" title="Rule: Call"></a>Rule: Call</h2><p>å¯¹äºä¹‹å‰å¿½ç•¥çš„ Call stmtï¼Œæœ‰å¦‚ä¸‹æ¨å¯¼è§„åˆ™ï¼š</p>
<p><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200823202143283.png" alt="image-20200823202143283"></p>
<p>ä¸»è¦æœ‰4éƒ¨åˆ†ï¼š</p>
<ol>
<li>ç”± $Dispatch(o_i, k)$ è·å–ç›®æ ‡æ–¹æ³•ï¼Œ$Dispatch()$ å®ç°ä¸ä¹‹å‰ CHA åˆ†æç›¸åŒï¼š<script type="math/tex; mode=display">
Dispatch(c, m)=\left\{
\begin{array}{ll}
m' ,& \text{if } c \text{ contains non-abstract method }m' \\
& \text{that has the same name and descriptor as }m\\  
Dispatch(c', m), & \text{otherwise}
\end{array}\right.\\
\text{where }c'\text{ is superclass of }c</script></li>
<li>è¢«$x$ æŒ‡å‘çš„å¯¹è±¡$o_i$ ï¼Œä¹Ÿè¢« $m_{this}$ æŒ‡å‘ï¼›</li>
<li>å¯¹äºæ¯ä¸€ä¸ªå®å‚$a_j$æ‰€æŒ‡å‘çš„ä¿¡æ¯ï¼Œä¹Ÿè¢«å½¢å‚ $m_{pj}$ æ‰€æŒ‡å‘â€”â€”åœ¨PFGä¸Šå¢åŠ  â€œå®å‚â†’å½¢å‚â€è¾¹ï¼›</li>
<li>å¯¹äºè¢«è¿”å›å€¼ $m_{ret}$ æŒ‡å‘çš„å¯¹è±¡$o_v$ï¼Œä¹Ÿè¢«ç­‰å·å·¦è¾¹å˜é‡ $r$ æŒ‡å‘â€”â€”åœ¨PFGä¸Šå¢åŠ â€œretâ†’râ€çš„è¾¹ã€‚</li>
</ol>
<p><strong>è®¨è®ºä¸ºä»€ä¹ˆå¯¹äº $m_{this}$ ä¸å¢åŠ è¾¹ï¼Œè€Œå¯¹å…¶ä»–å‚æ•°å°±å¢åŠ è¾¹ï¼š</strong></p>
<p>æ³¨æ„åˆ° $x$ æŒ‡å‘çš„ä¿¡æ¯æ˜¯ä¸€ä¸ªé›†åˆï¼Œè€Œ $m_{this}$ ç”±$Dispatch()$ è§£æåå¯ä»¥å”¯ä¸€ç¡®å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ¢å¥è¯è¯´ï¼š</p>
<ol>
<li><p>å¯¹äºthisæ¥è¯´ï¼ŒæŒ‡é’ˆåˆ†æå·²ç»å¯ä»¥å”¯ä¸€ç¡®å®šè¯¥å¯¹è±¡å®ä¾‹ï¼Œè‹¥ä¼ é€’ $x$ çš„æŒ‡å‘å¯¹è±¡é›†åˆåè€Œé€ æˆåˆ†æä¸å‡†ç¡®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/image-20200823204227690.png" alt="image-20200823204227690"></p>
</li>
<li><p>å¯¹äºå…¶ä»–å‚æ•°ï¼ŒæŒ‡é’ˆåˆ†ææ— æ³•ç¡®å®šå®ƒä»¬çš„å”¯ä¸€å¯¹è±¡å®ä¾‹ï¼Œä¸ºä¿è¯mayåˆ†æï¼Œéœ€è¦ä¼ é€’å…ˆå‰æ‰€æœ‰å¯èƒ½æ€§ï¼Œå³å¯èƒ½æŒ‡å‘çš„é›†åˆã€‚</p>
</li>
</ol>
<p>å½’æ ¹ç»“åº•ï¼Œthiså’Œä¸åŒå‚æ•°è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œthisçš„å®ä¾‹å‚ä¸äº† Dispatch è¿‡ç¨‹ã€‚</p>
<h2 id="Interprocedural-pointer-analysis"><a href="#Interprocedural-pointer-analysis" class="headerlink" title="Interprocedural pointer analysis"></a>Interprocedural pointer analysis</h2><ol>
<li>å’Œå…¶ä»–è¿‡ç¨‹é—´åˆ†æä¸€æ ·ï¼Œè¿‡ç¨‹é—´æŒ‡é’ˆåˆ†æéœ€è¦æŒ‡å®šä¸€ä¸ªå‡½æ•°å…¥å£</li>
<li>è¿‡ç¨‹é—´æŒ‡é’ˆåˆ†æä¸€è¾¹åš<strong>æŒ‡é’ˆåˆ†æ</strong>ï¼Œä¸€è¾¹æ„é€ <strong>è°ƒç”¨å›¾</strong></li>
<li>ç”±å…¥å£å‡ºå‘ä¸æ–­æ¢ç´¢æœªçŸ¥å‡½æ•°ï¼Œç›´åˆ°æ‰€æœ‰å¯è¢«æ¢ç´¢çš„å‡½æ•°éƒ½è¢«å¤„ç†å®Œæˆï¼Œè¿™æ ·æ—¢å¯ä»¥æé«˜æ•ˆç‡ï¼Œåˆå¯ä»¥æé«˜ç²¾åº¦</li>
</ol>
<h2 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Solve</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    S: ç¨‹åºæ‰€æœ‰è¯­å¥</span></span><br><span class="line"><span class="string">    WL: å·¥ä½œé˜Ÿåˆ—</span></span><br><span class="line"><span class="string">    PFG: Pointer flow graph</span></span><br><span class="line"><span class="string">    S: å¯è¾¾æ‰€æœ‰è¯­å¥é›†åˆ s_mè¡¨ç¤ºå‡½æ•°mçš„æ‰€æœ‰è¯­å¥é›†åˆ</span></span><br><span class="line"><span class="string">    RM: å¯è¾¾æ‰€æœ‰å‡½æ•°é›†åˆ</span></span><br><span class="line"><span class="string">    CG: è°ƒç”¨å›¾ï¼Œä¿å­˜è¾¹</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    WL = [] <span class="comment"># e.g., [&lt;n, pts&gt;] è¡¨ç¤ºæŒ‡é’ˆnå¯èƒ½ä¼šæŒ‡å‘ptsé›†åˆï¼ˆæ¯æ¬¡è¿­ä»£å°±ä¼šæœ‰æ–°çš„å¯èƒ½ï¼‰</span></span><br><span class="line">    PFG = &#123;&#125; <span class="comment"># e.g., &#123;&lt;x, &#123;ğ‘œğ‘–&#125;&gt;&#125; è¡¨ç¤ºæŒ‡é’ˆxæŒ‡å‘å¯¹è±¡ğ‘œğ‘–</span></span><br><span class="line">    S = &#123;&#125; <span class="comment"># added</span></span><br><span class="line">    RM = &#123;&#125; <span class="comment"># added</span></span><br><span class="line">    CG = &#123;&#125; <span class="comment"># added</span></span><br><span class="line">    AddReachable(m) <span class="comment"># difference</span></span><br><span class="line">    <span class="keyword">while</span> WL <span class="keyword">is</span> <span class="keyword">not</span> empty:</span><br><span class="line">        remove n, pts <span class="keyword">from</span> WL</span><br><span class="line">        Î” = pts - pt(n)</span><br><span class="line">        Propagate(n, Î”)</span><br><span class="line">        <span class="keyword">if</span> n represents a variable x:</span><br><span class="line">            <span class="keyword">for</span> each ğ‘œğ‘– âˆˆ Î”:</span><br><span class="line">                <span class="keyword">for</span> each x.f = y âˆˆ S: <span class="comment"># å¤„ç† store stmt</span></span><br><span class="line">                    AddEdge(y, ğ‘œğ‘–.ğ‘“)</span><br><span class="line">                <span class="keyword">for</span> each y = x.f âˆˆ S: <span class="comment"># å¤„ç† load stmt</span></span><br><span class="line">                    AddEdge(ğ‘œğ‘–.ğ‘“, y)</span><br><span class="line">                ProcessCall(x, ğ‘œğ‘–) <span class="comment"># added</span></span><br></pre></td></tr></table></figure>
<p>ä¸å•å‡½æ•°çš„æŒ‡é’ˆåˆ†æä¸åŒï¼Œä¸»è¦å˜åŒ–åœ¨12ã€13ã€14ã€15å’Œ26è¡Œï¼Œåœ¨å‡½æ•°åˆå§‹åŒ–é˜¶æ®µï¼Œå¢åŠ å¯è¾¾è¯­å¥é›†åˆã€å¯è¾¾å‡½æ•°é›†åˆå’Œè°ƒç”¨å›¾ï¼Œä»¥åŠå¯¹ new å’Œ assign çš„å¤„ç†æ”¾åœ¨äº† <code>AddReachable()</code> å‡½æ•°ä¸­ï¼Œåœ¨å˜åŒ–çš„æ¯ä¸ªå¯¹è±¡å®ä¾‹ä¸­ï¼Œé€šè¿‡ <code>ProcessCall()</code>å¤„ç†call stmtâ€”â€”å½“nä¸ºä¸€ä¸ªå˜é‡æ—¶è°ƒç”¨ã€‚</p>
<h3 id="AddReachable-m"><a href="#AddReachable-m" class="headerlink" title="AddReachable(m)"></a>AddReachable(m)</h3><p><code>AddReachable(m)</code>å‡½æ•°ç”¨äºå°†æ–°çš„æ–¹æ³• $m$ åŠ å…¥å¯è¾¾é›†åˆä¸­ï¼ŒåŒæ—¶å¤„ç† $m$ ä¸­ new å’Œ assign è¯­å¥ï¼Œå¤„ç†æ–¹æ³•ä¸å•å‡½æ•°ç±»ä¼¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">AddReachable</span><span class="params">(m)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> m âˆ‰ RM:</span><br><span class="line">        <span class="comment"># æ·»åŠ æ–°çš„å·²çŸ¥æ–¹æ³•å’Œè¯­å¥</span></span><br><span class="line">        add m to RM</span><br><span class="line">        S âˆª= S_m</span><br><span class="line">        <span class="comment"># æ›´æ–° worklist å’Œ PFG</span></span><br><span class="line">        <span class="keyword">for</span> each i: x = new T() âˆˆ S_m:</span><br><span class="line">            add &lt;x, &#123;ğ‘œğ‘–&#125;&gt; to WL</span><br><span class="line">        <span class="keyword">for</span> each x = y âˆˆ S_m:</span><br><span class="line">            AddEdge(y, x)</span><br></pre></td></tr></table></figure>
<h3 id="ProcessCall-x-ğ‘œğ‘–"><a href="#ProcessCall-x-ğ‘œğ‘–" class="headerlink" title="ProcessCall(x, ğ‘œğ‘–)"></a>ProcessCall(x, ğ‘œğ‘–)</h3><p>$ProcessCall(x,o_i)$ ç”¨äºå¤„ç† call è¯­å¥ï¼Œç®—æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ProcessCall</span><span class="params">(x, ğ‘œğ‘–)</span>:</span> </span><br><span class="line">    <span class="keyword">for</span> l: r = x.k(a1,â€¦,an) âˆˆ S:</span><br><span class="line">        <span class="comment"># è·å–æ–¹æ³•m</span></span><br><span class="line">        ğ‘š = Dispatch(ğ‘œğ‘–, k)</span><br><span class="line">        <span class="comment"># pass receiver object to "this"</span></span><br><span class="line">        add &lt;m_this,&#123;ğ‘œğ‘–&#125;&gt; to WL</span><br><span class="line">        <span class="keyword">if</span> l â†’ m âˆ‰ CG:</span><br><span class="line">            <span class="comment"># æ„å»ºcall graph</span></span><br><span class="line">            add l â†’ m to CG</span><br><span class="line">            <span class="comment"># æ ‡è®°æ–°æ–¹æ³•ä¸ºå·²çŸ¥æ–¹æ³•</span></span><br><span class="line">            AddReachable(m)</span><br><span class="line">            <span class="comment"># ä¼ é€’æ¯ä¸ªå‚æ•°ï¼Œå»ºè¾¹</span></span><br><span class="line">            <span class="keyword">for</span> parameter ğ‘ğ‘– of m:</span><br><span class="line">                AddEdge(ğ‘ğ‘–, ğ‘ğ‘–)</span><br><span class="line">            <span class="comment"># ä¼ é€’è¿”å›å€¼</span></span><br><span class="line">            AddEdge(ğ‘š_ğ‘Ÿğ‘’ğ‘¡, r)</span><br></pre></td></tr></table></figure>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>è®¾æœ‰å¦‚ä¸‹å¾…åˆ†æä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        A a = <span class="keyword">new</span> A();</span><br><span class="line">        A b = <span class="keyword">new</span> B();</span><br><span class="line">        A c = b.foo(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">A <span class="title">foo</span><span class="params">(A x)</span> </span>&#123; â€¦ &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function">A <span class="title">foo</span><span class="params">(A y)</span> </span>&#123;</span><br><span class="line">        A r = <span class="keyword">new</span> A();</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>é¦–å…ˆç¨‹åºåˆå§‹åŒ–ï¼Œæœ‰å¦‚ä¸‹ç»“æœï¼š</strong></p>
<ul>
<li>worklistï¼Œç”±3ã€4è¡Œçš„new stmtï¼š<br>WL=[&lt;a,{o3}&gt;,&lt;b,{o4}&gt;]</li>
<li>RMï¼Œ<code>A.main()</code>æˆä¸ºå·²çŸ¥å‡½æ•°ï¼š<br>RM={A.main()}</li>
<li>CG={}</li>
<li>PFGä¸ºç©ºï¼Œå› ä¸ºæ²¡æœ‰assign</li>
</ul>
<p><strong>è¿›å…¥å¾ªç¯ï¼Œå¤„ç† &lt;a,{o3}&gt;ï¼š</strong></p>
<p><code>a</code>æ²¡æœ‰storeã€loadå’Œcallï¼Œå› æ­¤åªåš<code>propagate(a,{o3})</code></p>
<ul>
<li>WL=[&lt;b,{o4}&gt;]</li>
<li>RM={A.main()}</li>
<li>CG={}</li>
<li>PFG:  <pre class="mermaid">    graph RL
      a("a{o3}")</pre>

</li>
</ul>
<p><strong>å¤„ç† &lt;b,{o4}&gt;ï¼š</strong></p>
<ol>
<li>å…ˆåš<code>propagate(b,{o4})</code>;</li>
<li>ç”±äºç¬¬5è¡Œå­˜åœ¨è°ƒç”¨ï¼Œæ‰§è¡Œ<code>ProcessCall(b, o4)</code>ï¼Œåœ¨å‡½æ•°ä¸­ï¼Œé¦–å…ˆè§£æåˆ°è°ƒç”¨å‡½æ•°ä¸º<code>m=B.foo(A)</code>ï¼Œå°† &lt;B.foo/this. {o4}&gt; åŠ å…¥ worklist;</li>
<li>æ¥ç€ç”±äºä¹‹å‰æ²¡æœ‰åˆ†æè¿‡è¯¥å‡½æ•°è°ƒç”¨:<ol>
<li>å°† <code>5â†’B.foo(A)</code> åŠ å…¥CG</li>
</ol>
</li>
<li>è°ƒç”¨ <code>AddReachable()</code>   <ol>
<li>å°†<code>B.foo(A)</code>åŠ å…¥åˆ°å·²çŸ¥å‡½æ•°   </li>
<li>æ³¨æ„åˆ°11è¡Œå­˜åœ¨newæ“ä½œï¼Œå°†{&lt;r, o11&gt;}åŠ å…¥worklist</li>
<li>è°ƒç”¨ <code>AddEdge(ai, pi)</code>ï¼Œæ›´æ–°PFG</li>
<li>è°ƒç”¨<code>AddEdge(r, c)</code>ï¼Œæ›´æ–°PFG</li>
</ol>
</li>
</ol>
<p>å¤„ç†ç»“æœä¸ºï¼š</p>
<ul>
<li>WL=[&lt;B.foo/this, {o4}&gt;, &lt;r, {o11}&gt;, &lt;y, {o3}&gt;]</li>
<li>RM={A.main(), B.foo(A)}</li>
<li>CG={5â†’B.foo(A)}</li>
<li>PFG:  <pre class="mermaid">    graph RL
      a("a{o3}")-->y("y{}")
      b("b{}")
      r("r{}")-->c("c{}")</pre>

</li>
</ul>
<p><strong>å¤„ç†<code>&lt;B.foo/this, {o4}&gt;</code>ï¼š</strong></p>
<p>åªéœ€è¦åš<code>Propagate(B.foo/this, {o4})</code></p>
<ul>
<li>WL=[&lt;B.foo/this, {o4}&gt;, &lt;r, {o11}&gt;, &lt;y, {o3}&gt;]</li>
<li>RM={A.main(), B.foo(A)}</li>
<li>CG={5â†’B.foo(A)}</li>
<li>PFG:  <pre class="mermaid">    graph RL
      a("a{o3}")-->y("y{}")
      b("b{}")
      r("r{}")-->c("c{}")
      Bfoo("B.foo/this{o4}")</pre>

</li>
</ul>
<p>åç»­æ­¥éª¤ç±»ä¼¼ï¼Œæœ€åç»“æœä¸ºï¼š</p>
<ul>
<li>WL=[&lt;B.foo/this, {o4}&gt;, &lt;r, {o11}&gt;, &lt;y, {o3}&gt;]</li>
<li>RM={A.main(), B.foo(A)}</li>
<li>CG={5â†’B.foo(A)}</li>
<li>PFG:  <pre class="mermaid">    graph RL
      a("a{o3}")-->y("y{o3}")
      b("b{o4}")
      r("r{o11}")-->c("c{o11}")
      Bfoo("B.foo/this{o4}")</pre>


</li>
</ul>
<h1 id="ç›¸å…³æ–‡çŒ®"><a href="#ç›¸å…³æ–‡çŒ®" class="headerlink" title="ç›¸å…³æ–‡çŒ®"></a>ç›¸å…³æ–‡çŒ®</h1><ol>
<li>William E. Weihl, â€œInterprocedural Data Flow Analysis in the Presence of Pointers, Procedure Variables, and Label Variablesâ€. POPL 1980.</li>
<li>Vini Kanvar, Uday P. Khedker, â€œHeap Abstractions for Static Analysisâ€. ACM CSUR 2016.</li>
<li>Lars Ole Andersen, 1994. â€œProgram Analysis and Specialization for the C Programming Languageâ€. Ph.D. Thesis. University of Copenhagen.</li>
<li>Hardekopf B, Lin C. Flow-sensitive pointer analysis for millions of lines of code. CGO 2011:289-298.</li>
<li>Lecture Notes on Pointer Analysis, <a href="https://www.cs.cmu.edu/~aldrich/courses/15-819O-13sp/resources/pointer.pdf" target="_blank" rel="noopener">https://www.cs.cmu.edu/~aldrich/courses/15-819O-13sp/resources/pointer.pdf</a></li>
</ol>

    </div>

    
    
    
        
      
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Anemone</li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/" title="é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰">http://anemone.top/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æï¼‰/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li>
</ul>
</div>

      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/ç™½ç›’æ‰«æ/" rel="tag"># ç™½ç›’æ‰«æ</a>
            
              <a href="/tags/é™æ€ç¨‹åºåˆ†æ/" rel="tag"># é™æ€ç¨‹åºåˆ†æ</a>
            
              <a href="/tags/è¿‡ç¨‹é—´åˆ†æ/" rel="tag"># è¿‡ç¨‹é—´åˆ†æ</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆè¿‡ç¨‹é—´åˆ†æï¼‰/" rel="next" title="é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆè¿‡ç¨‹é—´åˆ†æï¼‰">
                  <i class="fa fa-chevron-left"></i> é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆè¿‡ç¨‹é—´åˆ†æï¼‰
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/pl-é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æ-ä¸Šä¸‹æ–‡æ•æ„Ÿï¼‰/" rel="prev" title="é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æ-ä¸Šä¸‹æ–‡æ•æ„Ÿï¼‰">
                  é™æ€ç¨‹åºåˆ†æè¯¾ç¨‹ç¬”è®°ï¼ˆæŒ‡é’ˆåˆ†æ-ä¸Šä¸‹æ–‡æ•æ„Ÿï¼‰ <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="gitalk-container"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Motivation"><span class="nav-number">1.</span> <span class="nav-text">Motivation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction-to-Pointer-Analysis"><span class="nav-number">2.</span> <span class="nav-text">Introduction to Pointer Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æŒ‡é’ˆåˆ†æå’Œåˆ«ååˆ†æ"><span class="nav-number">2.1.</span> <span class="nav-text">æŒ‡é’ˆåˆ†æå’Œåˆ«ååˆ†æ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æŒ‡é’ˆåˆ†æçš„åº”ç”¨"><span class="nav-number">2.2.</span> <span class="nav-text">æŒ‡é’ˆåˆ†æçš„åº”ç”¨</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Key-Factors-of-Pointer-Analysis"><span class="nav-number">3.</span> <span class="nav-text">Key Factors of Pointer Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Heap-Abstraction-å †æŠ½è±¡"><span class="nav-number">3.1.</span> <span class="nav-text">Heap Abstraction(å †æŠ½è±¡)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸Šä¸‹æ–‡æ•æ„Ÿ"><span class="nav-number">3.2.</span> <span class="nav-text">ä¸Šä¸‹æ–‡æ•æ„Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æµæ•æ„Ÿ"><span class="nav-number">3.3.</span> <span class="nav-text">æµæ•æ„Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Analysis-Scope"><span class="nav-number">3.4.</span> <span class="nav-text">Analysis Scope</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Concerned-Statements"><span class="nav-number">4.</span> <span class="nav-text">Concerned Statements</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Javaä¸­çš„æŒ‡é’ˆ"><span class="nav-number">4.1.</span> <span class="nav-text">Javaä¸­çš„æŒ‡é’ˆ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸æŒ‡é’ˆåˆ†æç›¸å…³çš„è¯­å¥"><span class="nav-number">4.2.</span> <span class="nav-text">ä¸æŒ‡é’ˆåˆ†æç›¸å…³çš„è¯­å¥</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pointer-Analysis-Rules"><span class="nav-number">5.</span> <span class="nav-text">Pointer Analysis: Rules</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Domains-and-Notations"><span class="nav-number">5.1.</span> <span class="nav-text">Domains and Notations</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rules"><span class="nav-number">5.2.</span> <span class="nav-text">Rules</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-Implement-Pointer-Analysis"><span class="nav-number">6.</span> <span class="nav-text">How to Implement Pointer Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pointer-Flow-Graph"><span class="nav-number">6.1.</span> <span class="nav-text">Pointer Flow Graph</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pointer-Analysis-Algorithms"><span class="nav-number">7.</span> <span class="nav-text">Pointer Analysis: Algorithms</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Worklist"><span class="nav-number">7.1.</span> <span class="nav-text">Worklist</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åŠ è¾¹å‡½æ•°-AddEdge-ï¼š"><span class="nav-number">7.2.</span> <span class="nav-text">åŠ è¾¹å‡½æ•° AddEdge()ï¼š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æŒ‡é’ˆä¼ æ’­å‡½æ•°-Propagate-ï¼š"><span class="nav-number">7.3.</span> <span class="nav-text">æŒ‡é’ˆä¼ æ’­å‡½æ•° Propagate()ï¼š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸»å‡½æ•°-Solve-ï¼š"><span class="nav-number">7.4.</span> <span class="nav-text">ä¸»å‡½æ•° Solve()ï¼š</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å…·ä½“ç¤ºä¾‹"><span class="nav-number">7.5.</span> <span class="nav-text">å…·ä½“ç¤ºä¾‹</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pointer-Analysis-with-Method-Calls"><span class="nav-number">8.</span> <span class="nav-text">Pointer Analysis with Method Calls</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Rule-Call"><span class="nav-number">8.1.</span> <span class="nav-text">Rule: Call</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Interprocedural-pointer-analysis"><span class="nav-number">8.2.</span> <span class="nav-text">Interprocedural pointer analysis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Algorithm"><span class="nav-number">8.3.</span> <span class="nav-text">Algorithm</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AddReachable-m"><span class="nav-number">8.3.1.</span> <span class="nav-text">AddReachable(m)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ProcessCall-x-ğ‘œğ‘–"><span class="nav-number">8.3.2.</span> <span class="nav-text">ProcessCall(x, ğ‘œğ‘–)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example"><span class="nav-number">8.4.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ç›¸å…³æ–‡çŒ®"><span class="nav-number">9.</span> <span class="nav-text">ç›¸å…³æ–‡çŒ®</span></a></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.jpg"
      alt="Anemone">
  <p class="site-author-name" itemprop="name">Anemone</p>
  <div class="site-description" itemprop="description">å…³æ³¨Webå®‰å…¨ã€ç§»åŠ¨å®‰å…¨ã€Fuzzæµ‹è¯•å’Œæœºå™¨å­¦ä¹ </div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">70</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">86</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/anemone95" title="GitHub &rarr; https://github.com/anemone95" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:anemone95@qq.com" title="E-Mail &rarr; mailto:anemone95@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 â€“ <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">anemone</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.0</div>

        






  
  <script>
  function leancloudSelector(url) {
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = visitors.getAttribute('id').trim();
      var title = visitors.getAttribute('data-flag-title').trim();

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
            
              .catch(error => {
                console.log('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title: title, url: url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.log('Failed to create', error);
                });
            
          }
        })
        .catch(error => {
          console.log('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return element.getAttribute('id').trim();
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            leancloudSelector(url).innerText = time;
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.log('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=o5UaCJdPfEG0g7MVxXSMagpT-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id': 'o5UaCJdPfEG0g7MVxXSMagpT-gzGzoHsz',
            'X-LC-Key': 'c6IN1PuMV3QPltJcrHfn74Gt',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        const localhost = /http:\/\/(localhost|127.0.0.1|0.0.0.0)/;
        if (localhost.test(document.URL)) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>






        
      </div>
    </footer>
  </div>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script>
  <script src="https://cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script>
  <script src="https://cdn.bootcss.com/velocity/1.2.1/velocity.ui.js"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>
<script src="/js/next-boot.js?v=7.4.0"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>








  
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css">
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.js"></script><script src="/js/algolia-search.js?v=7.4.0"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.bootcss.com/mermaid/8.2.6/mermaid.min.js', () => {
    mermaid.initialize({
      theme: 'forest',
      logLevel: 3,
      flowchart: { curve: 'linear' },
      gantt: { axisFormat: '%m/%d/%Y' },
      sequence: { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>




  

  
    
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'f3075553d7b0225df6ca',
      clientSecret: '68362ba87c4cc8e13103afcf729f5bd8ea176a78',
      repo: 'anemone95.github.io',
      owner: 'Anemone95',
      admin: ['Anemone95'],
      id: 'dc7aaef8d46ebf66376cbfb39d0c24ad',
        language: window.navigator.language || window.navigator.userLanguage,
      
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

</body>
</html>
